<!DOCTYPE html>
<html lang="es">
<head>
    <!-- META TAGS PARA SEO (A√ëADE ESTO) -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- T√çTULO QUE APARECER√Å EN GOOGLE -->
    <title>Parkour Aventura - Juego Gratis de Parkour 2D | 10 Niveles</title>
    
    <!-- DESCRIPCI√ìN CORREGIDA (158 caracteres) -->
    <meta name="description" content="Juego de parkour 2D gratis. Salta obst√°culos, derrota enemigos y completa 10 niveles. Juego HTML5 sin descargas. ¬°Juega ahora gratis online!">
    
    <!-- PALABRAS CLAVE -->
    <meta name="keywords" content="juego parkour, juego 2d, juego gratis, juego online, html5 game, juego de plataformas, juego gratis sin descargar">
    
    <!-- AUTOR Y DERECHOS -->
    <meta name="author" content="Mathias">
    
    <!-- PARA REDES SOCIALES -->
    <meta property="og:title" content="Parkour Runner 2D - Juego Gratis">
    <meta property="og:description" content="Juega Parkour Runner 2D gratis online">
    <meta property="og:image" content="URL_DE_UNA_IMAGEN">
    <meta property="og:url" content="https://mathizzz67.github.io/Parkour-Aventura/">
    
    
  
    
    <!-- ROBOTS (para que Google indexe) -->
    <meta name="robots" content="index, follow">

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: #1a1a2e;
        }

        #gameCanvas {
            display: block;
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 70%, #90EE90 70%, #90EE90 100%);
            image-rendering: pixelated;
        }

        .menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: white;
            display: none;
            z-index: 100;
        }

        .menu.active {
            display: block;
        }

        .menu h2 {
            font-size: 48px;
            margin-bottom: 30px;
            color: #FFD700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
        }

        .menu h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .menu button {
            display: block;
            width: 250px;
            padding: 15px;
            margin: 15px auto;
            font-size: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .menu button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.6);
        }

        .color-picker {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 10px;
        }

        .color-picker label {
            font-size: 18px;
            min-width: 100px;
            text-align: left;
        }

        .color-picker input[type="color"] {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .slider-container {
            margin: 20px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .slider-container input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }

        .difficulty-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .difficulty-buttons button {
            width: auto;
            padding: 10px 20px;
        }

        .difficulty-buttons button.selected {
            background: #FFD700;
            color: #000;
        }

        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 10;
        }

        .heart {
            color: #FF0000;
            margin-right: 5px;
        }

        #levelDisplay {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 10;
        }

        /* Clase para ocultar visualmente pero mantener accesible para SEO */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- ========== CONTENIDO PARA GOOGLE (OCULTO VISUALMENTE) ========== -->
    <div class="sr-only">
        <h1>Parkour Aventura - Juego Gratis de Plataformas 2D</h1>
        
        <p>Juega gratis a Parkour Aventura, un emocionante juego de plataformas 2D con 10 niveles desafiantes. Controla a tu personaje, salta obst√°culos, derrota enemigos y completa todos los niveles en esta aventura de parkour creada con JavaScript.</p>
        
        <h2>¬øC√≥mo jugar Parkour Aventura?</h2>
        <ul>
            <li>Movimiento: Usa las teclas Flechas o WASD para moverte</li>
            <li>Saltar: Presiona la tecla Barra espaciadora o Flecha arriba</li>
            <li>Pausa: Presiona ESC para pausar el juego</li>
        </ul>
        
        <h2>Caracter√≠sticas del juego</h2>
        <ul>
            <li>10 niveles con dificultad progresiva</li>
            <li>Sistema de checkpoints para guardar tu progreso</li>
            <li>Personalizaci√≥n del personaje (color de cuerpo, camisa y pantal√≥n)</li>
            <li>3 niveles de dificultad (F√°cil, Normal, Dif√≠cil)</li>
            <li>Plataformas m√≥viles y power-ups de velocidad</li>
            <li>Enemigos inteligentes con patrullaje autom√°tico</li>
            <li>Totalmente gratuito y se juega directamente en el navegador</li>
        </ul>
        
        <h2>Compatibilidad</h2>
        <p>Parkour Aventura funciona en todos los navegadores modernos (Chrome, Firefox, Safari, Edge) y es compatible con la mayor√≠a de dispositivos.</p>
        
        <p>Este juego est√° creado con HTML5 Canvas y JavaScript puro. Para la mejor experiencia, aseg√∫rate de tener JavaScript habilitado en tu navegador.</p>
    </div>
    <!-- ========== FIN DEL CONTENIDO PARA GOOGLE ========== -->
    
    <canvas id="gameCanvas"></canvas>
    
    <div id="hud">
        <div id="lives"></div>
        <div id="health"></div>
    </div>
    
    <div id="levelDisplay"></div>

    <!-- Men√∫ Principal -->
    <div id="mainMenu" class="menu active">
        <h2>üéÆ PARKOUR ADVENTURE</h2>
        <p style="color: #FFD700; font-size: 18px; margin-bottom: 10px;">10 Niveles de Desaf√≠o √âpico</p>
        <p style="color: #87CEEB; font-size: 14px; margin-bottom: 20px;">Controles: ‚Üê‚Üí Mover | ‚Üë/Espacio Saltar | ESC Pausa</p>
        <button onclick="game.startGame()">JUGAR</button>
        <button onclick="game.showCustomization()">PERSONALIZAR</button>
        <button onclick="game.showSettings()">AJUSTES</button>
    </div>

    <!-- Men√∫ Personalizaci√≥n -->
    <div id="customizationMenu" class="menu">
        <h2>PERSONALIZAR PERSONAJE</h2>
        <div class="color-picker">
            <label>Cuerpo:</label>
            <input type="color" id="bodyColor" value="#FFFFFF">
        </div>
        <div class="color-picker">
            <label>Camisa:</label>
            <input type="color" id="shirtColor" value="#FF0000">
        </div>
        <div class="color-picker">
            <label>Pantal√≥n:</label>
            <input type="color" id="pantsColor" value="#000000">
        </div>
        <button onclick="game.backToMain()">VOLVER</button>
    </div>

    <!-- Men√∫ Ajustes -->
    <div id="settingsMenu" class="menu">
        <h2>AJUSTES</h2>
        <div class="slider-container">
            <label>Volumen M√∫sica: <span id="musicVolumeValue">50</span>%</label>
            <input type="range" id="musicVolume" min="0" max="100" value="50">
        </div>
        <div class="slider-container">
            <label>Volumen Efectos: <span id="sfxVolumeValue">50</span>%</label>
            <input type="range" id="sfxVolume" min="0" max="100" value="50">
        </div>
        <div>
            <label>Dificultad:</label>
            <div class="difficulty-buttons">
                <button id="easyBtn" onclick="game.setDifficulty('easy')">F√ÅCIL</button>
                <button id="normalBtn" class="selected" onclick="game.setDifficulty('normal')">NORMAL</button>
                <button id="hardBtn" onclick="game.setDifficulty('hard')">DIF√çCIL</button>
            </div>
        </div>
        <button onclick="game.backToMain()">VOLVER</button>
    </div>

    <!-- Men√∫ Pausa -->
    <div id="pauseMenu" class="menu">
        <h2>PAUSA</h2>
        <button onclick="game.resume()">REANUDAR</button>
        <button onclick="game.restartLevel()">REINICIAR NIVEL</button>
        <button onclick="game.backToMainFromPause()">MEN√ö PRINCIPAL</button>
    </div>

    <!-- Men√∫ Victoria -->
    <div id="victoryMenu" class="menu">
        <h2>üèÜ ¬°NIVEL COMPLETADO!</h2>
        <p id="victoryLevelInfo" style="font-size: 20px; margin: 15px 0;"></p>
        <button onclick="game.nextLevel()">SIGUIENTE NIVEL</button>
        <button onclick="game.restartLevel()">REINICIAR NIVEL</button>
        <button onclick="game.backToMainFromPause()">MEN√ö PRINCIPAL</button>
    </div>

    <!-- Men√∫ Game Over -->
    <div id="gameOverMenu" class="menu">
        <h2>üíÄ HAS PERDIDO</h2>
        <button onclick="game.restartLevel()">REINICIAR NIVEL</button>
        <button onclick="game.backToMainFromPause()">MEN√ö PRINCIPAL</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = 1200;
        canvas.height = 600;

        // Sistema de audio simple
        const audioSystem = {
            sounds: {},
            musicVolume: 0.5,
            sfxVolume: 0.5,
            playSound(name) {
                // Simula efectos de sonido (en producci√≥n usar√≠as Web Audio API)
                if (this.sfxVolume > 0) {
                    console.log(`üîä ${name}`);
                }
            },
            playMusic() {
                if (this.musicVolume > 0) {
                    console.log('üéµ M√∫sica de fondo activa');
                }
            }
        };

        // Configuraci√≥n del juego
        const gameConfig = {
            bodyColor: '#FFFFFF',
            shirtColor: '#FF0000',
            pantsColor: '#000000',
            difficulty: 'normal',
            currentLevel: 1,
            maxLives: 3,
            maxHealth: 3
        };

        // Clase Player
        class Player {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 30;
                this.height = 50;
                this.velocityX = 0;
                this.velocityY = 0;
                this.speed = 5;
                this.jumpPower = 15;
                this.gravity = 0.6;
                this.onGround = false;
                this.canDoubleJump = true;
                this.lives = gameConfig.maxLives;
                this.health = gameConfig.maxHealth;
                this.invulnerable = false;
                this.speedBoost = false;
                this.speedBoostTimer = 0;
                this.climbing = false;
                this.checkpointX = x;
                this.checkpointY = y;
            }

            update(keys, platforms, enemies) {
                // Movimiento horizontal
                let currentSpeed = this.speed;
                if (this.speedBoost) currentSpeed *= 2;

                if (keys['ArrowLeft'] || keys['a']) this.velocityX = -currentSpeed;
                else if (keys['ArrowRight'] || keys['d']) this.velocityX = currentSpeed;
                else this.velocityX = 0;

                // Salto
                if ((keys['ArrowUp'] || keys['w'] || keys[' ']) && !this.jumping) {
                    if (this.onGround) {
                        this.velocityY = -this.jumpPower;
                        this.onGround = false;
                        audioSystem.playSound('jump');
                        this.jumping = true;
                    }
                }

                if (!keys['ArrowUp'] && !keys['w'] && !keys[' ']) {
                    this.jumping = false;
                }

                // Aplicar gravedad
                this.velocityY += this.gravity;

                // Actualizar posici√≥n
                this.x += this.velocityX;
                this.y += this.velocityY;

                // Limitar velocidad de ca√≠da
                if (this.velocityY > 20) this.velocityY = 20;

                // Colisiones con plataformas
                this.onGround = false;
                this.currentPlatform = null;
                
                for (let platform of platforms) {
                    if (this.checkCollision(platform)) {
                        if (this.velocityY > 0 && this.y + this.height - this.velocityY <= platform.y) {
                            this.y = platform.y - this.height;
                            this.velocityY = 0;
                            this.onGround = true;
                            this.currentPlatform = platform;
                            
                            // Plataforma de velocidad
                            if (platform.type === 'speed') {
                                this.speedBoost = true;
                                this.speedBoostTimer = 300;
                            }
                        }
                    }
                }

                // Mover con la plataforma
                if (this.onGround && this.currentPlatform && this.currentPlatform.type === 'moving') {
                    this.x += this.currentPlatform.moveSpeed * this.currentPlatform.moveDirection;
                }

                // Actualizar boost de velocidad
                if (this.speedBoost) {
                    this.speedBoostTimer--;
                    if (this.speedBoostTimer <= 0) {
                        this.speedBoost = false;
                    }
                }

                // L√≠mites del mundo
                if (this.x < 0) this.x = 0;
                if (this.x + this.width > canvas.width) this.x = canvas.width - this.width;
                if (this.y > canvas.height) {
                    this.takeDamage(this.health);
                }

                // Colisiones con enemigos
                if (!this.invulnerable) {
                    for (let enemy of enemies) {
                        if (this.checkCollision(enemy) && !enemy.dead) {
                            if (this.velocityY > 0 && this.y < enemy.y) {
                                enemy.hit();
                                this.velocityY = -10;
                                audioSystem.playSound('hit');
                            } else {
                                this.takeDamage(1);
                            }
                        }
                    }
                }
            }

            checkCollision(obj) {
                return this.x < obj.x + obj.width &&
                       this.x + this.width > obj.x &&
                       this.y < obj.y + obj.height &&
                       this.y + this.height > obj.y;
            }

            takeDamage(amount) {
                if (this.invulnerable) return;
                
                this.health -= amount;
                audioSystem.playSound('damage');
                this.invulnerable = true;
                
                setTimeout(() => {
                    this.invulnerable = false;
                }, 1000);

                if (this.health <= 0) {
                    this.lives--;
                    if (this.lives > 0) {
                        this.health = gameConfig.maxHealth;
                        this.x = this.checkpointX;
                        this.y = this.checkpointY;
                        this.velocityX = 0;
                        this.velocityY = 0;
                    } else {
                        game.gameOver();
                    }
                }
            }

            draw() {
                // Efecto de invulnerabilidad
                if (this.invulnerable && Math.floor(Date.now() / 100) % 2 === 0) {
                    ctx.globalAlpha = 0.5;
                }

                // Cuerpo (blanco)
                ctx.fillStyle = gameConfig.bodyColor;
                ctx.fillRect(this.x + 8, this.y + 5, 14, 15); // Cabeza

                // Camisa (roja)
                ctx.fillStyle = gameConfig.shirtColor;
                ctx.fillRect(this.x + 5, this.y + 20, 20, 15); // Torso

                // Pantal√≥n (negro)
                ctx.fillStyle = gameConfig.pantsColor;
                ctx.fillRect(this.x + 5, this.y + 35, 8, 15); // Pierna izq
                ctx.fillRect(this.x + 17, this.y + 35, 8, 15); // Pierna der

                // Brazos
                ctx.fillStyle = gameConfig.shirtColor;
                ctx.fillRect(this.x + 2, this.y + 22, 4, 10); // Brazo izq
                ctx.fillRect(this.x + 24, this.y + 22, 4, 10); // Brazo der

                // Indicador de velocidad
                if (this.speedBoost) {
                    ctx.fillStyle = 'rgba(255, 255, 0, 0.5)';
                    ctx.fillRect(this.x - 5, this.y - 5, this.width + 10, this.height + 10);
                }

                ctx.globalAlpha = 1;
            }
        }

        // Clase Platform
        class Platform {
            constructor(x, y, width, height, type = 'normal') {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
                this.type = type;
                this.moveDirection = 1;
                this.moveSpeed = 2;
                this.startX = x;
                this.moveRange = 150;
            }

            update() {
                if (this.type === 'moving') {
                    this.x += this.moveSpeed * this.moveDirection;
                    if (this.x > this.startX + this.moveRange || this.x < this.startX - this.moveRange) {
                        this.moveDirection *= -1;
                    }
                }
            }

            draw() {
                switch(this.type) {
                    case 'normal':
                        ctx.fillStyle = '#8B4513';
                        break;
                    case 'moving':
                        ctx.fillStyle = '#4169E1';
                        break;
                    case 'speed':
                        ctx.fillStyle = '#FFD700';
                        break;
                    case 'lava':
                        ctx.fillStyle = '#FF4500';
                        break;
                    default:
                        ctx.fillStyle = '#8B4513';
                }
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // Decoraci√≥n
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(this.x, this.y, this.width, 5);
            }
        }

        // Clase Enemy
        class Enemy {
            constructor(x, y, patrolStart, patrolEnd) {
                this.x = x;
                this.y = y;
                this.width = 30;
                this.height = 40;
                this.patrolStart = patrolStart;
                this.patrolEnd = patrolEnd;
                this.speed = 1.5;
                this.direction = 1;
                this.hits = 0;
                this.maxHits = 4;
                this.dead = false;
            }

            update() {
                if (this.dead) return;

                this.x += this.speed * this.direction;
                
                if (this.x >= this.patrolEnd || this.x <= this.patrolStart) {
                    this.direction *= -1;
                }
            }

            hit() {
                this.hits++;
                if (this.hits >= this.maxHits) {
                    this.dead = true;
                    audioSystem.playSound('enemyDeath');
                }
            }

            draw() {
                if (this.dead) return;

                // Cuerpo alien√≠gena (verde)
                ctx.fillStyle = '#00FF00';
                ctx.fillRect(this.x + 8, this.y + 5, 14, 12); // Cabeza
                ctx.fillRect(this.x + 5, this.y + 17, 20, 15); // Cuerpo

                // Ojos
                ctx.fillStyle = '#000000';
                ctx.fillRect(this.x + 10, this.y + 8, 3, 4);
                ctx.fillRect(this.x + 17, this.y + 8, 3, 4);

                // Espada
                ctx.fillStyle = '#C0C0C0';
                if (this.direction > 0) {
                    ctx.fillRect(this.x + 25, this.y + 20, 8, 2);
                    ctx.fillRect(this.x + 32, this.y + 15, 2, 10);
                } else {
                    ctx.fillRect(this.x - 3, this.y + 20, 8, 2);
                    ctx.fillRect(this.x - 4, this.y + 15, 2, 10);
                }

                // Indicador de vida
                ctx.fillStyle = 'rgba(255, 0, 0, 0.5)';
                const healthWidth = (this.maxHits - this.hits) / this.maxHits * this.width;
                ctx.fillRect(this.x, this.y - 8, healthWidth, 4);
            }
        }

        // Clase Checkpoint
        class Checkpoint {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 40;
                this.height = 80;
                this.activated = false;
            }

            checkActivation(player) {
                if (!this.activated && 
                    player.x < this.x + this.width &&
                    player.x + player.width > this.x &&
                    player.y < this.y + this.height &&
                    player.y + player.height > this.y) {
                    this.activated = true;
                    player.checkpointX = this.x;
                    player.checkpointY = this.y - player.height;
                    audioSystem.playSound('checkpoint');
                }
            }

            draw() {
                ctx.fillStyle = this.activated ? '#00FF00' : '#808080';
                ctx.fillRect(this.x + 15, this.y, 10, this.height);
                ctx.fillStyle = this.activated ? '#FFD700' : '#404040';
                ctx.beginPath();
                ctx.moveTo(this.x + 15, this.y);
                ctx.lineTo(this.x + 15, this.y + 30);
                ctx.lineTo(this.x + 40, this.y + 15);
                ctx.closePath();
                ctx.fill();
            }
        }

        // Clase Flag (bandera final)
        class Flag {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 40;
                this.height = 80;
            }

            checkVictory(player) {
                return player.x < this.x + this.width &&
                       player.x + player.width > this.x &&
                       player.y < this.y + this.height &&
                       player.y + player.height > this.y;
            }

            draw() {
                // Asta
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(this.x + 15, this.y, 5, this.height);
                
                // Bandera a cuadros
                for (let i = 0; i < 4; i++) {
                    for (let j = 0; j < 4; j++) {
                        ctx.fillStyle = (i + j) % 2 === 0 ? '#000000' : '#FFFFFF';
                        ctx.fillRect(this.x + 20 + j * 8, this.y + 5 + i * 8, 8, 8);
                    }
                }
            }
        }

        // Niveles
        const levels = [
            {
                name: "Nivel 1 - Inicio",
                platforms: [
                    { x: 0, y: 550, width: 250, height: 50, type: 'normal' },
                    { x: 350, y: 480, width: 150, height: 20, type: 'normal' },
                    { x: 550, y: 420, width: 120, height: 20, type: 'normal' },
                    { x: 720, y: 360, width: 150, height: 20, type: 'normal' },
                    { x: 920, y: 420, width: 120, height: 20, type: 'normal' },
                    { x: 1050, y: 550, width: 150, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 400, y: 440, start: 350, end: 500 },
                    { x: 950, y: 380, start: 920, end: 1040 },
                ],
                checkpoints: [
                    { x: 600, y: 340 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 2 - Plataformas M√≥viles",
                platforms: [
                    { x: 0, y: 550, width: 200, height: 50, type: 'normal' },
                    { x: 280, y: 480, width: 120, height: 20, type: 'moving' },
                    { x: 500, y: 420, width: 100, height: 20, type: 'speed' },
                    { x: 680, y: 360, width: 120, height: 20, type: 'moving' },
                    { x: 880, y: 300, width: 100, height: 20, type: 'normal' },
                    { x: 1020, y: 380, width: 120, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 320, y: 440, start: 280, end: 400 },
                    { x: 720, y: 320, start: 680, end: 800 },
                    { x: 1050, y: 340, start: 1020, end: 1140 },
                ],
                checkpoints: [
                    { x: 550, y: 340 },
                    { x: 920, y: 220 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 3 - Desaf√≠o Vertical",
                platforms: [
                    { x: 0, y: 550, width: 150, height: 50, type: 'normal' },
                    { x: 180, y: 490, width: 100, height: 20, type: 'moving' },
                    { x: 340, y: 430, width: 90, height: 20, type: 'normal' },
                    { x: 480, y: 370, width: 100, height: 20, type: 'moving' },
                    { x: 640, y: 310, width: 80, height: 20, type: 'speed' },
                    { x: 770, y: 260, width: 100, height: 20, type: 'moving' },
                    { x: 920, y: 320, width: 90, height: 20, type: 'normal' },
                    { x: 1060, y: 400, width: 100, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 220, y: 450, start: 180, end: 280 },
                    { x: 510, y: 330, start: 480, end: 580 },
                    { x: 800, y: 220, start: 770, end: 870 },
                    { x: 1080, y: 360, start: 1060, end: 1160 },
                ],
                checkpoints: [
                    { x: 380, y: 350 },
                    { x: 810, y: 180 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 4 - Velocidad Extrema",
                platforms: [
                    { x: 0, y: 550, width: 120, height: 50, type: 'normal' },
                    { x: 160, y: 490, width: 90, height: 20, type: 'speed' },
                    { x: 300, y: 440, width: 100, height: 20, type: 'moving' },
                    { x: 450, y: 380, width: 80, height: 20, type: 'speed' },
                    { x: 580, y: 330, width: 90, height: 20, type: 'moving' },
                    { x: 720, y: 280, width: 100, height: 20, type: 'normal' },
                    { x: 860, y: 230, width: 90, height: 20, type: 'moving' },
                    { x: 980, y: 300, width: 80, height: 20, type: 'speed' },
                    { x: 1100, y: 380, width: 90, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 190, y: 450, start: 160, end: 250 },
                    { x: 330, y: 400, start: 300, end: 400 },
                    { x: 610, y: 290, start: 580, end: 670 },
                    { x: 890, y: 190, start: 860, end: 950 },
                    { x: 1120, y: 340, start: 1100, end: 1190 },
                ],
                checkpoints: [
                    { x: 350, y: 360 },
                    { x: 760, y: 200 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 5 - Maestro del Parkour",
                platforms: [
                    { x: 0, y: 550, width: 100, height: 50, type: 'normal' },
                    { x: 130, y: 490, width: 80, height: 20, type: 'moving' },
                    { x: 250, y: 440, width: 70, height: 20, type: 'speed' },
                    { x: 360, y: 390, width: 80, height: 20, type: 'moving' },
                    { x: 480, y: 340, width: 90, height: 20, type: 'normal' },
                    { x: 610, y: 290, width: 80, height: 20, type: 'moving' },
                    { x: 730, y: 240, width: 70, height: 20, type: 'speed' },
                    { x: 840, y: 190, width: 80, height: 20, type: 'moving' },
                    { x: 960, y: 260, width: 90, height: 20, type: 'normal' },
                    { x: 1090, y: 330, width: 80, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 160, y: 450, start: 130, end: 210 },
                    { x: 390, y: 350, start: 360, end: 440 },
                    { x: 510, y: 300, start: 480, end: 570 },
                    { x: 640, y: 250, start: 610, end: 690 },
                    { x: 870, y: 150, start: 840, end: 920 },
                    { x: 1120, y: 290, start: 1090, end: 1170 },
                ],
                checkpoints: [
                    { x: 300, y: 360 },
                    { x: 640, y: 210 },
                    { x: 1000, y: 180 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 6 - Laberinto A√©reo",
                platforms: [
                    { x: 0, y: 550, width: 90, height: 50, type: 'normal' },
                    { x: 120, y: 500, width: 70, height: 20, type: 'moving' },
                    { x: 230, y: 450, width: 60, height: 20, type: 'normal' },
                    { x: 330, y: 400, width: 80, height: 20, type: 'moving' },
                    { x: 450, y: 350, width: 70, height: 20, type: 'speed' },
                    { x: 560, y: 300, width: 80, height: 20, type: 'moving' },
                    { x: 680, y: 250, width: 70, height: 20, type: 'normal' },
                    { x: 790, y: 200, width: 80, height: 20, type: 'moving' },
                    { x: 910, y: 270, width: 70, height: 20, type: 'speed' },
                    { x: 1020, y: 350, width: 80, height: 20, type: 'moving' },
                    { x: 1130, y: 430, width: 70, height: 20, type: 'normal' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 150, y: 460, start: 120, end: 190 },
                    { x: 360, y: 360, start: 330, end: 410 },
                    { x: 590, y: 260, start: 560, end: 640 },
                    { x: 710, y: 210, start: 680, end: 750 },
                    { x: 820, y: 160, start: 790, end: 870 },
                    { x: 1050, y: 310, start: 1020, end: 1100 },
                ],
                checkpoints: [
                    { x: 380, y: 320 },
                    { x: 720, y: 170 },
                    { x: 1060, y: 270 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 7 - Caos Cin√©tico",
                platforms: [
                    { x: 0, y: 550, width: 80, height: 50, type: 'normal' },
                    { x: 110, y: 490, width: 70, height: 20, type: 'moving' },
                    { x: 210, y: 430, width: 80, height: 20, type: 'moving' },
                    { x: 320, y: 370, width: 70, height: 20, type: 'speed' },
                    { x: 420, y: 310, width: 80, height: 20, type: 'moving' },
                    { x: 530, y: 250, width: 70, height: 20, type: 'moving' },
                    { x: 640, y: 200, width: 80, height: 20, type: 'normal' },
                    { x: 750, y: 260, width: 70, height: 20, type: 'moving' },
                    { x: 850, y: 320, width: 80, height: 20, type: 'speed' },
                    { x: 960, y: 380, width: 70, height: 20, type: 'moving' },
                    { x: 1070, y: 450, width: 80, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 140, y: 450, start: 110, end: 180 },
                    { x: 240, y: 390, start: 210, end: 290 },
                    { x: 450, y: 270, start: 420, end: 500 },
                    { x: 560, y: 210, start: 530, end: 600 },
                    { x: 780, y: 220, start: 750, end: 820 },
                    { x: 990, y: 340, start: 960, end: 1030 },
                    { x: 1100, y: 410, start: 1070, end: 1150 },
                ],
                checkpoints: [
                    { x: 350, y: 290 },
                    { x: 680, y: 120 },
                    { x: 1000, y: 300 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 8 - Torre del Destino",
                platforms: [
                    { x: 0, y: 550, width: 100, height: 50, type: 'normal' },
                    { x: 130, y: 500, width: 60, height: 20, type: 'moving' },
                    { x: 220, y: 450, width: 70, height: 20, type: 'speed' },
                    { x: 320, y: 400, width: 60, height: 20, type: 'moving' },
                    { x: 410, y: 350, width: 70, height: 20, type: 'normal' },
                    { x: 510, y: 300, width: 60, height: 20, type: 'moving' },
                    { x: 600, y: 250, width: 70, height: 20, type: 'speed' },
                    { x: 700, y: 200, width: 60, height: 20, type: 'moving' },
                    { x: 790, y: 150, width: 70, height: 20, type: 'normal' },
                    { x: 890, y: 210, width: 60, height: 20, type: 'moving' },
                    { x: 980, y: 280, width: 70, height: 20, type: 'speed' },
                    { x: 1080, y: 360, width: 60, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 160, y: 460, start: 130, end: 190 },
                    { x: 350, y: 360, start: 320, end: 380 },
                    { x: 440, y: 310, start: 410, end: 480 },
                    { x: 540, y: 260, start: 510, end: 570 },
                    { x: 730, y: 160, start: 700, end: 760 },
                    { x: 920, y: 170, start: 890, end: 950 },
                    { x: 1110, y: 320, start: 1080, end: 1140 },
                ],
                checkpoints: [
                    { x: 350, y: 320 },
                    { x: 640, y: 170 },
                    { x: 920, y: 130 },
                    { x: 1020, y: 200 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 9 - Pesadilla Mec√°nica",
                platforms: [
                    { x: 0, y: 550, width: 70, height: 50, type: 'normal' },
                    { x: 100, y: 500, width: 50, height: 20, type: 'moving' },
                    { x: 180, y: 450, width: 60, height: 20, type: 'moving' },
                    { x: 270, y: 400, width: 50, height: 20, type: 'speed' },
                    { x: 350, y: 350, width: 60, height: 20, type: 'moving' },
                    { x: 440, y: 300, width: 50, height: 20, type: 'moving' },
                    { x: 520, y: 250, width: 60, height: 20, type: 'normal' },
                    { x: 610, y: 200, width: 50, height: 20, type: 'moving' },
                    { x: 690, y: 160, width: 60, height: 20, type: 'speed' },
                    { x: 780, y: 220, width: 50, height: 20, type: 'moving' },
                    { x: 860, y: 290, width: 60, height: 20, type: 'moving' },
                    { x: 950, y: 360, width: 50, height: 20, type: 'speed' },
                    { x: 1030, y: 430, width: 60, height: 20, type: 'moving' },
                    { x: 1120, y: 500, width: 50, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 130, y: 460, start: 100, end: 150 },
                    { x: 210, y: 410, start: 180, end: 240 },
                    { x: 380, y: 310, start: 350, end: 410 },
                    { x: 470, y: 260, start: 440, end: 490 },
                    { x: 640, y: 160, start: 610, end: 660 },
                    { x: 810, y: 180, start: 780, end: 830 },
                    { x: 890, y: 250, start: 860, end: 920 },
                    { x: 1060, y: 390, start: 1030, end: 1090 },
                ],
                checkpoints: [
                    { x: 300, y: 320 },
                    { x: 560, y: 170 },
                    { x: 820, y: 140 },
                    { x: 1000, y: 280 }
                ],
                flag: { x: 1130, y: 470 }
            },
            {
                name: "Nivel 10 - Leyenda Definitiva",
                platforms: [
                    { x: 0, y: 550, width: 60, height: 50, type: 'normal' },
                    { x: 90, y: 510, width: 40, height: 20, type: 'moving' },
                    { x: 160, y: 470, width: 50, height: 20, type: 'speed' },
                    { x: 240, y: 430, width: 40, height: 20, type: 'moving' },
                    { x: 310, y: 390, width: 50, height: 20, type: 'moving' },
                    { x: 390, y: 350, width: 40, height: 20, type: 'speed' },
                    { x: 460, y: 310, width: 50, height: 20, type: 'moving' },
                    { x: 540, y: 270, width: 40, height: 20, type: 'moving' },
                    { x: 610, y: 230, width: 50, height: 20, type: 'normal' },
                    { x: 690, y: 190, width: 40, height: 20, type: 'moving' },
                    { x: 760, y: 150, width: 50, height: 20, type: 'speed' },
                    { x: 840, y: 110, width: 40, height: 20, type: 'moving' },
                    { x: 910, y: 170, width: 50, height: 20, type: 'moving' },
                    { x: 990, y: 240, width: 40, height: 20, type: 'speed' },
                    { x: 1060, y: 320, width: 50, height: 20, type: 'moving' },
                    { x: 1140, y: 400, width: 40, height: 20, type: 'moving' },
                    { x: 1100, y: 550, width: 100, height: 50, type: 'normal' },
                ],
                enemies: [
                    { x: 120, y: 470, start: 90, end: 130 },
                    { x: 190, y: 430, start: 160, end: 210 },
                    { x: 270, y: 390, start: 240, end: 280 },
                    { x: 340, y: 350, start: 310, end: 360 },
                    { x: 490, y: 270, start: 460, end: 510 },
                    { x: 570, y: 230, start: 540, end: 580 },
                    { x: 720, y: 150, start: 690, end: 730 },
                    { x: 870, y: 70, start: 840, end: 880 },
                    { x: 940, y: 130, start: 910, end: 960 },
                    { x: 1090, y: 280, start: 1060, end: 1110 },
                ],
                checkpoints: [
                    { x: 280, y: 350 },
                    { x: 500, y: 230 },
                    { x: 720, y: 110 },
                    { x: 950, y: 90 },
                    { x: 1100, y: 240 }
                ],
                flag: { x: 1130, y: 470 }
            }
        ];

        // Game Manager
        const game = {
            state: 'menu',
            player: null,
            platforms: [],
            enemies: [],
            checkpoints: [],
            flag: null,
            keys: {},
            paused: false,
            clouds: [],

            init() {
                this.setupEventListeners();
                this.generateClouds();
                this.loadSettings();
                console.log(`üéÆ Parkour Adventure - ${levels.length} niveles disponibles`);
                console.log('Niveles:', levels.map((l, i) => `${i+1}. ${l.name}`).join(', '));
                this.gameLoop();
            },

            setupEventListeners() {
                document.addEventListener('keydown', (e) => {
                    this.keys[e.key] = true;
                    if (e.key === 'Escape' && this.state === 'playing' && !this.paused) {
                        this.pause();
                    }
                });

                document.addEventListener('keyup', (e) => {
                    this.keys[e.key] = false;
                });

                // Color pickers
                document.getElementById('bodyColor').addEventListener('input', (e) => {
                    gameConfig.bodyColor = e.target.value;
                });
                document.getElementById('shirtColor').addEventListener('input', (e) => {
                    gameConfig.shirtColor = e.target.value;
                });
                document.getElementById('pantsColor').addEventListener('input', (e) => {
                    gameConfig.pantsColor = e.target.value;
                });

                // Volume sliders
                document.getElementById('musicVolume').addEventListener('input', (e) => {
                    audioSystem.musicVolume = e.target.value / 100;
                    document.getElementById('musicVolumeValue').textContent = e.target.value;
                });
                document.getElementById('sfxVolume').addEventListener('input', (e) => {
                    audioSystem.sfxVolume = e.target.value / 100;
                    document.getElementById('sfxVolumeValue').textContent = e.target.value;
                });
            },

            generateClouds() {
                for (let i = 0; i < 8; i++) {
                    this.clouds.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * 200 + 50,
                        speed: Math.random() * 0.3 + 0.1,
                        width: Math.random() * 80 + 60,
                        height: Math.random() * 30 + 30
                    });
                }
            },

            loadLevel(levelIndex) {
                const level = levels[levelIndex - 1];
                if (!level) {
                    console.error('Nivel no encontrado:', levelIndex);
                    return;
                }

                console.log(`Cargando ${level.name} (${levelIndex}/${levels.length})`);

                this.platforms = [];
                this.enemies = [];
                this.checkpoints = [];

                // Crear plataformas
                for (let p of level.platforms) {
                    this.platforms.push(new Platform(p.x, p.y, p.width, p.height, p.type));
                }

                // Crear enemigos
                for (let e of level.enemies) {
                    this.enemies.push(new Enemy(e.x, e.y, e.start, e.end));
                }

                // Crear checkpoints
                for (let c of level.checkpoints) {
                    this.checkpoints.push(new Checkpoint(c.x, c.y));
                }

                // Crear bandera
                this.flag = new Flag(level.flag.x, level.flag.y);

                // Crear jugador
                this.player = new Player(50, 400);

                document.getElementById('levelDisplay').textContent = `${level.name} (${levelIndex}/${levels.length})`;
            },

            startGame() {
                this.hideAllMenus();
                gameConfig.currentLevel = 1;
                // Asegurar que las vidas est√©n correctas seg√∫n dificultad
                if (gameConfig.difficulty === 'easy') {
                    gameConfig.maxLives = 5;
                    gameConfig.maxHealth = 5;
                } else if (gameConfig.difficulty === 'normal') {
                    gameConfig.maxLives = 3;
                    gameConfig.maxHealth = 3;
                } else if (gameConfig.difficulty === 'hard') {
                    gameConfig.maxLives = 2;
                    gameConfig.maxHealth = 2;
                }
                this.loadLevel(1);
                this.state = 'playing';
                audioSystem.playMusic();
            },

            showCustomization() {
                this.hideAllMenus();
                document.getElementById('customizationMenu').classList.add('active');
            },

            showSettings() {
                this.hideAllMenus();
                document.getElementById('settingsMenu').classList.add('active');
            },

            backToMain() {
                this.hideAllMenus();
                document.getElementById('mainMenu').classList.add('active');
            },

            backToMainFromPause() {
                this.hideAllMenus();
                this.state = 'menu';
                this.paused = false;
                document.getElementById('mainMenu').classList.add('active');
            },

            setDifficulty(difficulty) {
                gameConfig.difficulty = difficulty;
                document.querySelectorAll('.difficulty-buttons button').forEach(btn => {
                    btn.classList.remove('selected');
                });
                document.getElementById(difficulty + 'Btn').classList.add('selected');

                // Ajustar dificultad
                switch(difficulty) {
                    case 'easy':
                        gameConfig.maxLives = 5;
                        gameConfig.maxHealth = 5;
                        break;
                    case 'normal':
                        gameConfig.maxLives = 3;
                        gameConfig.maxHealth = 3;
                        break;
                    case 'hard':
                        gameConfig.maxLives = 2;
                        gameConfig.maxHealth = 2;
                        break;
                }
            },

            pause() {
                this.paused = true;
                document.getElementById('pauseMenu').classList.add('active');
            },

            resume() {
                this.paused = false;
                document.getElementById('pauseMenu').classList.remove('active');
            },

            restartLevel() {
                this.hideAllMenus();
                // Restaurar vidas seg√∫n dificultad
                if (gameConfig.difficulty === 'easy') {
                    gameConfig.maxLives = 5;
                    gameConfig.maxHealth = 5;
                } else if (gameConfig.difficulty === 'normal') {
                    gameConfig.maxLives = 3;
                    gameConfig.maxHealth = 3;
                } else if (gameConfig.difficulty === 'hard') {
                    gameConfig.maxLives = 2;
                    gameConfig.maxHealth = 2;
                }
                this.loadLevel(gameConfig.currentLevel);
                this.state = 'playing';
                this.paused = false;
            },

            nextLevel() {
                gameConfig.currentLevel++;
                console.log(`Avanzando al nivel ${gameConfig.currentLevel} de ${levels.length}`);
                if (gameConfig.currentLevel > levels.length) {
                    this.hideAllMenus();
                    setTimeout(() => {
                        alert('üéâüèÜ ¬°FELICITACIONES! üèÜüéâ\n\n¬°Has completado todos los 10 niveles!\n\n¬°Eres una LEYENDA del parkour!\n\nGracias por jugar üí™');
                        this.backToMainFromPause();
                    }, 100);
                } else {
                    this.hideAllMenus();
                    this.loadLevel(gameConfig.currentLevel);
                    this.state = 'playing';
                }
            },

            gameOver() {
                this.state = 'gameover';
                audioSystem.playSound('death');
                document.getElementById('gameOverMenu').classList.add('active');
            },

            victory() {
                this.state = 'victory';
                audioSystem.playSound('victory');
                document.getElementById('victoryLevelInfo').textContent = 
                    `Nivel ${gameConfig.currentLevel} de ${levels.length} completado`;
                document.getElementById('victoryMenu').classList.add('active');
            },

            hideAllMenus() {
                document.querySelectorAll('.menu').forEach(menu => {
                    menu.classList.remove('active');
                });
            },

            loadSettings() {
                // En memoria - sin localStorage
            },

            saveSettings() {
                // En memoria - sin localStorage
            },

            update() {
                if (this.state !== 'playing' || this.paused) return;

                // Actualizar nubes
                for (let cloud of this.clouds) {
                    cloud.x += cloud.speed;
                    if (cloud.x > canvas.width) {
                        cloud.x = -cloud.width;
                    }
                }

                // Actualizar plataformas
                for (let platform of this.platforms) {
                    platform.update();
                }

                // Actualizar enemigos
                for (let enemy of this.enemies) {
                    enemy.update();
                }

                // Actualizar jugador
                this.player.update(this.keys, this.platforms, this.enemies);

                // Checkpoints
                for (let checkpoint of this.checkpoints) {
                    checkpoint.checkActivation(this.player);
                }

                // Verificar victoria
                if (this.flag.checkVictory(this.player)) {
                    this.victory();
                }

                // Colisi√≥n con lava
                for (let platform of this.platforms) {
                    if (platform.type === 'lava' && this.player.checkCollision(platform)) {
                        this.player.takeDamage(this.player.health);
                    }
                }

                this.updateHUD();
            },

            updateHUD() {
                const livesDiv = document.getElementById('lives');
                const healthDiv = document.getElementById('health');

                livesDiv.innerHTML = `Vidas: ${'‚ù§Ô∏è'.repeat(this.player.lives)}`;
                healthDiv.innerHTML = `Salud: ${'üíö'.repeat(this.player.health)}`;
            },

            draw() {
                // Limpiar canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Fondo
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(0.7, '#87CEEB');
                gradient.addColorStop(0.7, '#90EE90');
                gradient.addColorStop(1, '#228B22');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Dibujar nubes
                for (let cloud of this.clouds) {
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    ctx.beginPath();
                    ctx.arc(cloud.x, cloud.y, cloud.height / 2, 0, Math.PI * 2);
                    ctx.arc(cloud.x + cloud.width / 3, cloud.y, cloud.height / 2.5, 0, Math.PI * 2);
                    ctx.arc(cloud.x + cloud.width * 2 / 3, cloud.y, cloud.height / 2.3, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Decoraci√≥n del suelo
                const groundY = 420;
                for (let i = 0; i < canvas.width; i += 80) {
                    // Plantas
                    ctx.fillStyle = '#228B22';
                    ctx.fillRect(i + 10, groundY + 10, 3, 15);
                    ctx.fillStyle = '#32CD32';
                    ctx.beginPath();
                    ctx.arc(i + 11, groundY + 8, 5, 0, Math.PI * 2);
                    ctx.fill();

                    // Arbustos
                    if (i % 160 === 0) {
                        ctx.fillStyle = '#2E8B57';
                        ctx.beginPath();
                        ctx.arc(i + 40, groundY + 20, 12, 0, Math.PI * 2);
                        ctx.arc(i + 55, groundY + 20, 12, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }

                if (this.state === 'playing') {
                    // Dibujar plataformas
                    for (let platform of this.platforms) {
                        platform.draw();
                    }

                    // Dibujar checkpoints
                    for (let checkpoint of this.checkpoints) {
                        checkpoint.draw();
                    }

                    // Dibujar bandera
                    this.flag.draw();

                    // Dibujar enemigos
                    for (let enemy of this.enemies) {
                        enemy.draw();
                    }

                    // Dibujar jugador
                    this.player.draw();
                }
            },

            gameLoop() {
                this.update();
                this.draw();
                requestAnimationFrame(() => this.gameLoop());
            }
        };

        // Iniciar juego
        game.init();
    </script>
</body>
</html>
